# 单片机程序设计

## 需求

1. 开机时按下F2/F8按键
2. 检测不同颜色的LED等是否点亮
3. 识别数字语音

## 方案

1. 按键模拟，完成开机时点击按键。

单片机接收夹具压下感应器触发产生中断，通讯CH9328模块，发送指定按键信息到PC主板。

2. 通过滤光片(窄带)过滤指定颜色的光照射到光敏电阻上，通过单片机AD功能测量电阻两端电压变化，判断是否有指定颜色的光。

上位机通过串口触发单片机读取指定通道的AD电压值，返回给上位机。

3. 通过语音识别模块识别PC主板发出的数字声音

单片机通过触发LD3320语音识别模块工作，识别到声音后返回上位机。

## 实现
### 选型

| 功能 | 型号 | 备注 |
-:|:-:|:-
|单片机|STC8G2K64S4|14路10位AD采集 4串口|
|按键事件|CH9328|
|语音识别|LD3320|

### 技术要点

1. 单片机外部中断(夹具压下触发)
2. 单片机串口中断(上位机指令)
3. 单片机AD检测
4. 单片机串口通讯

### 连接图

graph TD
  [PC上位机]==>(单片机STC8G)
